# The `Variables` section allows you to define constants that can be used dynamically in the request below.
# - You can reference these variables anywhere in the request using the <<variable_name>> syntax.
# - Ensure all values are strings. For non-string values (like objects), convert them to JSON-formatted strings.
# Example:
#   - Method = "GET" can be referenced in the [Request] section as <<Method>>.
#   - Params = "sample data" can be used in the query string or body as <<Params>>.
[Variables] # DON'T CHANGE THE SECTION NAME. KEEP AS IT IS
# Example:
# Method = "GET"  # HTTP method to use, e.g., GET, POST, PUT, etc.
# CredentialType = "OAuth"  # Type of credential to use for authentication, e.g., OAuth, APIKey, etc.
# Params = "Params sample data"  # Placeholder for query or additional parameters.
# Raw = "Raw sample data"  # Placeholder for raw data content.

# The Request section contains the general configuration for making the API request.
[Request]

# URL Field (MANDATORY):
# - Specify the complete API URL or build it dynamically using application variables.
# - You can access application-level fields using the syntax <<application.FieldName>>.
# Example:
# - Using Azure APIs: Combine AppURL and SubscriptionID:
#   "<<application.AppURL>>/subscriptions/<<application.SubscriptionID>>/resourcegroups?api-version=2021-04-01"
# - Using AWS APIs: 
#   "<<application.AppURL>>/ListRoles" translates to "https://iam.amazonaws.com/ListRoles".
URL = ""  # Specify the API endpoint.

# HTTP Method (MANDATORY):
# - Specify the HTTP method to use for the request.
# - Supported values: 
#   GET, POST, PUT, DELETE, PATCH.
Method = ""


# Content Type (MANDATORY):
# - Specify the Content-Type header to define the format of the request body.
# - Supported values: 
#   multipart/form-data, application/x-www-form-urlencoded, application/json, application/octet-stream.
ContentType = ""

# Follow Redirects (MANDATORY):
# - Set to true if HTTP redirects should be followed automatically.
# - Set to false if redirects should not be followed.
Redirect = true

# Credential Type (MANDATORY):
# Select the credential type for the request. Options include:
#
# === AUTO-GENERATED HEADERS (No need to specify Authorization manually) ===
#
# AWSSignature:
#   - Automatically infers AWS service and region from URL.
#   - Adds Authorization, x-amz-date, and x-amz-content-sha256 headers.
#   - Do NOT specify Authorization header manually.
#
# BasicAuthentication:
#   - Automatically adds "Authorization: Basic <base64(username:password)>".
#   - Do NOT specify Authorization header manually.
#
# BearerToken:
#   - Automatically adds "Authorization: Bearer <token>".
#   - Do NOT specify Authorization header manually.
#
# APIKey:
#   - Automatically adds "Authorization: <api_key>".
#   - Do NOT specify Authorization header manually.
#
# NoAuth:
#   - No authentication is applied. No headers required.
#
# === MANUAL AUTHORIZATION HEADER REQUIRED (Specify in [Request.Headers]) ===
#
# OAuth:
#   - Must specify Authorization header using <<validationCURLresponse.*>>.
#   - Example:
#       Authorization = "<<validationCURLresponse.token_type>> <<validationCURLresponse.access_token>>"
#
# CustomType:
#   - Must specify Authorization header using <<validationCURLresponse.*>>.
#   - Example:
#       Authorization = "<<validationCURLresponse.tokenType>> <<validationCURLresponse.authToken>>"
#
# JWTBearer:
#   - Requires Authorization header.
#   - Option 1 (auto):  Authorization = "Bearer <<JWTBearer>>" (for JWT generated using Algorithm, PrivateKey, Payload)
#   - Option 2 (manual): Authorization = "<<validationCURLresponse.token>>" (if using validationCURL)
#
CredentialType = ""

# Timeout (MANDATORY):
# - Specify the timeout for the request in seconds.
TimeOut = 30

# SSL Certificate Verification (MANDATORY):
# The verify parameter in the requests is used to specify whether SSL certificates should be verified when making an HTTPS request.
# Here's how it works:
# verify=True: Validates SSL certificates against trusted CA bundles (default). Ensures secure communication.
# verify=False: Disables SSL certificate validation. Not recommended for production due to security risks.
Verify = true

# Number of Threads (MANDATORY):
# Number of threads to use for parallel API requests
# - Increase for faster parallel processing
# - Decrease to reduce system load (especially in limited environments like Docker)
# - If MaxWorkers is set to 1, requests are made sequentially
# - If set too high (e.g., >20), it will be capped at 20 to protect system performance
MaxWorkers = 5


    [Request.Retries.RetryOnCondition]
    # Configure the retry logic based on specific conditions.

    ConditionField = "<<response.status_code>>"
    # The response attribute used to determine whether a retry should be attempted.
    # This can be any response property, such as status_code, headers, body, cookies, or url.

    ConditionValue = "503|504|429"
    # Specifies the values that trigger a retry, separated by a pipe (|).
    # Supports multiple values (e.g., "503|504|429") or a single value (e.g., "200").

    TimeInterval = 2
    # The wait time (in seconds) between consecutive retry attempts.

    MaxRetries = 3 
    # The maximum number of retry attempts before stopping further retries.

    RetryBaseDelay = 2
    # The exponential base used in backoff calculation.

    RetryMaxDelay = 60
    # The maximum allowed wait time (in seconds) between retries.


# Headers Section:
# Request Headers Section: You can add custom headers here as needed.
#
# The 'Authorization' field is NOT required for the following CredentialTypes:
#   [AWSSignature, BasicAuthentication, BearerToken, APIKey]
# Because it will be generated automatically based on 'CredentialType'.
#
# For the following CredentialTypes, you MUST define the 'Authorization' header manually:
#   [CustomType, OAuth, JWTBearer]
#
# CustomType & OAuth:
# -------------------
# These CredentialTypes require a validation CURL (ValidationCURL) in the Application configuration
# to generate the Authorization token dynamically. 
# You can simply specify that CURL in the application, and then reference its response here.
#
# EXAMPLE (Azure OAuth):
# --------------------------------------------------
# 1. Application -> ValidationCURL
#    For Azure APIs, you can generate a Bearer token using:
#        curl --location 'https://login.microsoftonline.com/<<CustomType.TenantID>>/oauth2/token' \
#             --header 'Content-Type: application/x-www-form-urlencoded' \
#             --data-urlencode 'grant_type=client_credentials' \
#             --data-urlencode 'client_id=<<CustomType.ClientID>>' \
#             --data-urlencode 'client_secret=<<CustomType.ClientSecret>>' \
#             --data-urlencode 'resource=https://servicebus.azure.net'
#
# 2. RequestConfigFile -> Headers
#    Once the CURL is validated, you can access its response dynamically:
#        [Request.Headers]
#        Authorization = "<<validationCURLresponse.tokenType>> <<validationCURLresponse.authToken>>"
# --------------------------------------------------
#
# JWTBearer:
#   - Option 1 (auto): Authorization = "Bearer <<JWTBearer>>" (uses Algorithm, PrivateKey, Payload)
#   - Option 2 (manual): Authorization = "<<validationCURLresponse.token>>" (if using validationCURL)
#
# NoAuth:
#   - No Authorization header required.
#
# Specify additional HTTP headers as key-value pairs.
# Example:
#     Content-Type = "application/json"
#     Connection = "keep-alive"
[Request.Headers]
# Example:
# Authorization = "<<validationCURLresponse.tokenType>> <<validationCURLresponse.authToken>>"

# Query Parameters:
# - Define query parameters for GET requests or additional parameters for other request types.
# - Specify parameters as key-value pair in the format: key = value.
# - You can use dynamic variables such as <<Params>> and <<Version>>.
# - Additionally you can access <<fromdate>> and <<todate>> from the 'UserInputs'
[Request.Params]
# Example:
# Action = "<<Params>>"
# Version = "<<Version>>"

# Request Data Section:
# - Specify the request body based on the ContentType.
# - Define one of the following sections depending on the request format.
[Request.Data]
    # Form-Data Body:
    # - Used with ContentType = "multipart/form-data".
    # - Define form fields as key-value pairs.
    # - For file uploads, specify the file path or MinIO storage path.
    [Request.Data.FormData]
    # Example:
    # field1 = "Value1"
    # field2 = "Value2"

    # URL-Encoded Body:
    # - Used with ContentType = "application/x-www-form-urlencoded".
    # - Define fields to be URL-encoded.
    [Request.Data.URLEncoded]
    # Example:
    # field1 = "Value1"
    # field2 = "Value2"

    # Raw Body:
    # - Used with ContentType = "application/json", "text/html", "text/plain", or "application/xml".
    # - Define raw data as JSON or plain text.
    [Request.Data.Raw]
    # Example:
    # Value = '{"key": "<<Raw>>", "field1": "Value1"}'

    # Binary Body:
    # - Used with ContentType = "application/octet-stream".
    # - Define binary data, such as base64-encoded files.
    [Request.Data.Binary]
    # Example:
    # Value = "QmluYXJ5IERhdGE="  # Base64-encoded binary data.


# Additional Information:
# - You can add any number of key-value pairs in the format key = value for the following sections:
#   - Headers: Define additional HTTP headers required for the request.
#   - Params: Specify query parameters or additional request parameters.
#   - Data: Populate request body fields based on the selected ContentType.
# - You can access dynamic variables from the input file or application configuration using <<inputfile.FieldName>> or <<application.FieldName>>.
# - Example: <<application.SubscriptionID>> can be used to include a subscription ID in the request.